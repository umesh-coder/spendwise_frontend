import{a as Z,b as Te,c as He}from"./chunk-V5HQV3QE.js";import{a as Q,b as Ie,c as Pe}from"./chunk-2ZLWJESD.js";import{A as V,Aa as Oe,Ba as J,Ia as ke,Ja as $,Ka as Ve,La as Ae,Q as k,R as de,S as A,Va as z,Wa as Le,Xa as Ge,Za as je,_a as Be,a as q,ab as Re,b as G,ba as B,ca as ue,cb as Fe,da as R,db as Ne,ea as ge,h as le,ha as Ke,ia as he,j as O,ja as I,k as j,ka as F,l as me,la as fe,ma as xe,na as N,pa as _e,qa as H,ra as be,sa as Ce,ta as ve,u as M,ua as we,v as ce,va as Ee,w as pe,wa as Se,xa as Me,ya as De,z as U,za as ye}from"./chunk-PP2SF3VY.js";import{$a as p,Cb as t,Db as e,Eb as _,Fb as D,Gb as y,Ib as S,Lb as d,Nb as C,Rb as ne,Sb as oe,Tb as ae,Ub as re,Vb as r,Vc as P,Wb as b,Wc as T,Xb as v,Zc as se,_a as m,cc as L,da as te,f as Ze,na as E,oa as ie,qb as h,sb as u,wa as f,xa as x}from"./chunk-OZJFN6VX.js";function Xe(n,s){n&1&&(t(0,"div"),_(1,"app-welcome-loader"),e())}function et(n,s){if(n&1&&(t(0,"tr")(1,"td")(2,"b"),r(3,"Comment :"),e()(),t(4,"td"),r(5),e()()),n&2){let l=C(2);m(5),b(l.tableData.comment)}}function tt(n,s){if(n&1&&(t(0,"div")(1,"div",1)(2,"div",2)(3,"p"),r(4,"Expense Details"),e()(),t(5,"table",3)(6,"tr")(7,"td")(8,"b"),r(9,"Name : "),e()(),t(10,"td"),r(11),e()(),t(12,"tr")(13,"td")(14,"b"),r(15,"Amount : "),e()(),t(16,"td"),r(17),e()(),t(18,"tr")(19,"td")(20,"b"),r(21,"Expense Date :"),e()(),t(22,"td"),r(23),e()(),t(24,"tr")(25,"td")(26,"b"),r(27,"Expense Category : "),e()(),t(28,"td"),r(29),e()(),t(30,"tr")(31,"td")(32,"b"),r(33,"Payment Type : "),e()(),t(34,"td"),r(35),e()(),h(36,et,6,1,"tr",0),e()(),t(37,"div",4)(38,"button",5),r(39,"Ok"),e()()()),n&2){let l=C();m(11),b(l.tableData.name),m(6),b(l.tableData.amount),m(6),b(l.tableData.expense_date),m(6),b(l.tableData.expense_category),m(6),b(l.tableData.payment),m(),u("ngIf",l.tableData.comment!=null&&l.tableData.comment&&l.tableData.comment!="")}}var ze=(()=>{let s=class s{constructor(i){this.businessData=i,this.tableData=[],this.isLoading=!1}ngOnInit(){this.onGetSingleExpense()}onGetSingleExpense(){this.isLoading=!0,this.businessData.onGetSingleExpense(this.businessData.data.data._id).subscribe(i=>{this.tableData=i.data,this.isLoading=!1})}};s.\u0275fac=function(o){return new(o||s)(p(k))},s.\u0275cmp=E({type:s,selectors:[["app-view-single"]],decls:2,vars:2,consts:[[4,"ngIf"],[2,"margin-top","30px"],[1,"viewExpense"],["align","center"],["mat-dialog-actions","","align","end"],["mat-flat-button","","mat-dialog-close","","color","primary"]],template:function(o,a){o&1&&h(0,Xe,2,0,"div",0)(1,tt,40,6,"div",0),o&2&&(u("ngIf",a.isLoading),m(),u("ngIf",!a.isLoading))},dependencies:[T,de,M,F,N],styles:[".viewExpense[_ngcontent-%COMP%]{margin-left:10px}.viewExpense[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem}"]});let n=s;return n})();var ot=()=>({"border-radius":"5px",height:"150px","animation-duration":"2s"}),at=()=>({"border-radius":"5px",height:"400px","animation-duration":"2s"}),rt=()=>({"border-radius":"5px",height:"250px","animation-duration":"2s"}),st=()=>[5,10];function lt(n,s){n&1&&(t(0,"div",2),_(1,"ngx-skeleton-loader",3)(2,"ngx-skeleton-loader",3)(3,"ngx-skeleton-loader",3),e()),n&2&&(m(),u("theme",L(3,ot)),m(),u("theme",L(4,at)),m(),u("theme",L(5,rt)))}function mt(n,s){if(n&1&&(t(0,"div",36)(1,"mat-card",37)(2,"mat-card-content")(3,"p",38)(4,"mat-icon",39),r(5),e()(),t(6,"p",40),r(7),e(),t(8,"p",41),r(9),e()()()()),n&2){let l=s.$implicit;m(5),b(l.icon),m(2),b(l.content),m(2),b(l.title)}}function ct(n,s){n&1&&(t(0,"th",42),r(1," Name "),e())}function pt(n,s){if(n&1&&(t(0,"td",43),r(1),e()),n&2){let l=s.$implicit;m(),v(" ",l.name," ")}}function dt(n,s){n&1&&(t(0,"th",42),r(1," Amount "),e())}function ut(n,s){if(n&1&&(t(0,"td",43),r(1),e()),n&2){let l=s.$implicit;m(),v(" ",l.amount," ")}}function gt(n,s){n&1&&(t(0,"th",42),r(1," Expense Date "),e())}function ht(n,s){if(n&1&&(t(0,"td",43),r(1),e()),n&2){let l=s.$implicit;m(),v(" ",l.expense_date," ")}}function ft(n,s){n&1&&(t(0,"th",42),r(1," Expense Category "),e())}function xt(n,s){if(n&1&&(t(0,"td",43),r(1),e()),n&2){let l=s.$implicit;m(),v(" ",l.expense_category," ")}}function _t(n,s){n&1&&(t(0,"th",42),r(1," Payment "),e())}function bt(n,s){if(n&1&&(t(0,"td",43),r(1),e()),n&2){let l=s.$implicit;m(),v(" ",l.payment," ")}}function Ct(n,s){n&1&&(t(0,"th",42),r(1," Comment "),e())}function vt(n,s){if(n&1&&(t(0,"td",43),r(1),e()),n&2){let l=s.$implicit;m(),v(" ",l.comment," ")}}function wt(n,s){n&1&&_(0,"tr",44)}function Et(n,s){if(n&1){let l=S();t(0,"tr",45),d("click",function(){let o=f(l).$implicit,a=C(2);return x(a.onOpen(o))}),e()}}function St(n,s){if(n&1){let l=S();t(0,"div",4)(1,"div",5),h(2,mt,10,3,"div",6),e(),t(3,"div",7)(4,"div",8)(5,"mat-card")(6,"mat-card-title",9),r(7,"Category Summary"),e(),t(8,"mat-card-subtitle",10),r(9,"Click to View"),e(),t(10,"mat-card-content")(11,"div",11)(12,"button",12),d("click",function(){f(l);let o=C();return x(o.openPieChart())}),_(13,"img",13),e()()()()(),t(14,"div",8)(15,"mat-card")(16,"mat-card-title",9)(17,"p"),r(18,"Expense Monthly Summary"),e()(),t(19,"mat-card-subtitle",14),r(20,"Click to View"),e(),t(21,"mat-card-content")(22,"div",15)(23,"button",12),d("click",function(){f(l);let o=C();return x(o.openBarChart())}),_(24,"img",16),e()()()()()(),t(25,"div",17)(26,"div",18)(27,"mat-card")(28,"mat-card-title",9),r(29,"Detail Summary"),e(),t(30,"mat-card-subtitle",9),r(31,"Click on row to Edit/Delete Expense"),e(),t(32,"mat-card-content",19)(33,"div",20)(34,"div",21)(35,"div",22)(36,"table",23),D(37,24),h(38,ct,2,0,"th",25)(39,pt,2,1,"td",26),y(),D(40,27),h(41,dt,2,0,"th",25)(42,ut,2,1,"td",26),y(),D(43,28),h(44,gt,2,0,"th",25)(45,ht,2,1,"td",26),y(),D(46,29),h(47,ft,2,0,"th",25)(48,xt,2,1,"td",26),y(),D(49,30),h(50,_t,2,0,"th",25)(51,bt,2,1,"td",26),y(),D(52,31),h(53,Ct,2,0,"th",25)(54,vt,2,1,"td",26),y(),h(55,wt,1,0,"tr",32)(56,Et,1,0,"tr",33),e()(),_(57,"mat-paginator",34),e()()()()()(),t(58,"div")(59,"button",35),d("click",function(){f(l);let o=C();return x(o.onAdd())}),t(60,"mat-icon"),r(61,"add-chart"),e()()()()}if(n&2){let l=C();m(2),u("ngForOf",l.cards),m(34),u("dataSource",l.dataSource),m(19),u("matHeaderRowDef",l.displayedColumns),m(),u("matRowDefColumns",l.displayedColumns),m(),u("pageSizeOptions",L(5,st))}}var Ue=(()=>{let s=class s{constructor(i,o,a,c,g,w){this.businessData=i,this.dialog=o,this.http=a,this.route=c,this.authServ=g,this._snackBar=w,this.displayedColumns=["name","amount","expense_date","expense_category","payment","comment"],this.ELEMENT_DATA=[],this.isLoading=!0,this.isDelete=!1,this.dataSource=new J,this.cards=[],this.allexpense=0,this.count=0,this.hashMap={},this.userId=sessionStorage.getItem("Id")?.split(" ")[1]}ngOnInit(){this.isLoading=!0,this.isDelete=!1,this.userId=sessionStorage.getItem("Id")?.split(" ")[1],this.getAllExpense(this.userId)}onHome(){this.route.navigate(["home"])}updateExpene(){let i={expenseLogged:this.businessData.expensesLogged?this.businessData.expensesLogged:0};console.log("update expense"+this.userId,i),this.authServ.updateUserData(this.userId,i)}getAllExpense(i){this.businessData.onGetAllExpense(i).subscribe(o=>{this.ELEMENT_DATA=o.data,this.dataSource=new J(this.ELEMENT_DATA),this.count=0;let a=o.data.length;setTimeout(()=>{this.dataSource.paginator=this.paginator},5e3),this.cards=[{icon:"today",title:"First Expense Date",content:a>0?o.data[0].expense_date:"-"},{icon:"today",title:"Latest Expense Date",content:a>0?o.data[o.data.length-1].expense_date:"-"},{icon:"numbers",title:"Number of Expenses",content:a},{icon:"monetization_on",title:"Total Amount",content:"\u20B9"+this.count}],this.allexpense=a,this.businessData.expensesLogged=this.allexpense,this.updateExpene(),this.pieChartData(o.data),this.onBarChartEdit(o.data),setTimeout(()=>{this.isLoading=!1},4e3)},o=>{this._snackBar.open("Session Expired!!","",{duration:2e3}),this.authServ.onLogout()})}pieChartData(i){this.businessData.pieLabels=[],this.businessData.piedata=[],this.hashMap={},this.count=0,i&&this.businessData.onGetAllCategory().subscribe(o=>{this.cate=o.data;for(let a=0;a<this.cate.length;a++)this.hashMap[this.cate[a]]=0;for(let a=0;a<i.length;a++)this.hashMap[i[a].expense_category]+=i[a].amount;for(let a in this.hashMap)this.hashMap[a]!=0&&(this.businessData.pieLabels.push(a),this.businessData.piedata.push(this.hashMap[a]),this.count+=this.hashMap[a]);this.cards[3].content="\u20B9"+this.count})}openPieChart(){this.businessData.chartType="pie";let i=this.dialog.open(Z,{width:"500px",height:"400px"});this.businessData.pieDialogRef=i}onBarChartEdit(i){let o={};for(let a=0;a<i.length;a++){let c=i[a].expense_date.toString().split(" ");o[c[3]]=[]}for(let a=0;a<i.length;a++){let c=i[a].expense_date.toString().split(" ");o[c[3]].push([c[1],i[a].amount])}this.businessData.hashmap=o,console.log(o)}openBarChart(){this.businessData.chartType="bar";let i=this.dialog.open(Z,{width:"700px",height:"450px"})}onOpen(i){this.openDialog();let o={action:"edit",data:i};this.businessData.data=o}openDialog(){this.dialog.open(Mt,{width:"300px",height:"190px"}).afterClosed().subscribe(o=>{o==="delete"&&this.getAllExpense(this.userId)})}onAdd(){this.businessData.onNavigate("home")}};s.\u0275fac=function(o){return new(o||s)(p(k),p(I),p(G),p(O),p(V),p(U))},s.\u0275cmp=E({type:s,selectors:[["app-view-expenses"]],viewQuery:function(o,a){if(o&1&&ne(H,5),o&2){let c;oe(c=ae())&&(a.paginator=c.first)}},decls:2,vars:2,consts:[["style","padding: 15px;",4,"ngIf"],["class","main",4,"ngIf"],[2,"padding","15px"],["count","1","appearance","line","animation","animation",3,"theme"],[1,"main"],[1,"row","row-col-4"],["class","col-lg-3 col-xs-3 col-md-12 col-sm-6",4,"ngFor","ngForOf"],[1,"row","row-col-2"],[1,"col-sm-6","col-xs-12"],[2,"padding","10px 20px"],[2,"padding","5px 20px"],[2,"padding-bottom","20px"],[1,"btn-pie",3,"click"],["src","../../../assets/image/pie23.gif","width","250px"],[2,"padding-left","20px","padding-bottom","10px"],[2,"padding-bottom","5px"],["src","../../../assets/image/bar11.gif","width","175px"],[1,"row","row-col-1"],[1,"col","col-xs-12","col-sm-12"],[1,"tableContent"],[2,"margin","0px 8px","margin-bottom","20px"],[1,"mat-elevation-z8"],[1,"table-container"],["mat-table","",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","amount"],["matColumnDef","expense_date"],["matColumnDef","expense_category"],["matColumnDef","payment"],["matColumnDef","comment"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","matTooltip","View/Edit/Delete",3,"click",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","Select page of periodic elements",3,"pageSizeOptions"],["matTooltip","Add Expense","mat-mini-fab","","color","accent",1,"btns",3,"click"],[1,"col-lg-3","col-xs-3","col-md-12","col-sm-6"],[1,"matContnet"],[1,"icons"],["role","img",2,"font-size","48px","width","50px","height","50px"],[1,"front1"],[1,"front"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row","","matTooltip","View/Edit/Delete",3,"click"]],template:function(o,a){o&1&&h(0,lt,4,6,"div",0)(1,St,62,6,"div",1),o&2&&(u("ngIf",a.isLoading),m(),u("ngIf",!a.isLoading))},dependencies:[P,T,_e,ce,A,be,ve,Me,we,Ce,De,Ee,Se,ye,Oe,B,R,ge,ue,H,Ie],styles:['.main[_ngcontent-%COMP%]{padding:30px 25px;background-image:url("./media/bg_spendwise-EZDWY5Y2.jpg");background-size:cover;background-repeat:no-repeat;width:100%;height:auto}mat-card[_ngcontent-%COMP%]{margin:0 25px 20px}mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center}.icons[_ngcontent-%COMP%]{font-size:25px;font-weight:700}.content[_ngcontent-%COMP%]{padding-top:10px;display:flex;flex-direction:row;justify-content:space-around;align-items:center}.tableContent[_ngcontent-%COMP%]{overflow:hidden;position:relative;display:contents}.matContnet[_ngcontent-%COMP%]:hover{transform:scale(1.1);transition:.5s}.front[_ngcontent-%COMP%]{font-family:cursive;color:gray}.front1[_ngcontent-%COMP%]{font-size:24px;font-family:cursive;font-weight:700}table[_ngcontent-%COMP%]{width:100%;overflow:hidden}.table-container[_ngcontent-%COMP%]{max-width:100%;overflow-x:scroll}.noelement[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding-top:50px}.noelement[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:25px;font-weight:240;font-family:Lucida Sans,Lucida Sans Regular,Lucida Grande,Lucida Sans Unicode,Geneva,Verdana,sans-serif}.btn-pie[_ngcontent-%COMP%]{background-color:#fff;text-decoration:none;border:none}.btn-pie[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{transition:.5s;cursor:pointer}.btns[_ngcontent-%COMP%]{position:fixed;bottom:10%;right:5%;z-index:100}']});let n=s;return n})(),Mt=(()=>{let s=class s{constructor(i,o,a,c,g){this.dialogRef=i,this.dialog=o,this.businessData=a,this.route=c,this._snackBar=g}onOpen(){this.route.navigate(["edit",this.businessData.data.data._id])}onDelete(){this.businessData.onDeleteExpense(this.businessData.data.data._id).subscribe(i=>{this._snackBar.open(i.message,"",{duration:2e3})})}onView(){let i=this.dialog.open(ze,{width:"300px",height:"250px"})}};s.\u0275fac=function(o){return new(o||s)(p(he),p(I),p(k),p(O),p(U))},s.\u0275cmp=E({type:s,selectors:[["confirm"]],decls:11,vars:0,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions","","align","end"],["mat-flat-button","","mat-dialog-close","","color","primary",3,"click"],["mat-raised-button","","mat-dialog-close","delete","color","warn",3,"click"],["mat-raised-button","","mat-dialog-close","",3,"click"]],template:function(o,a){o&1&&(t(0,"h1",0),r(1,"Confirm Action"),e(),t(2,"div",1),r(3,` Would you like to proceed?
`),e(),t(4,"div",2)(5,"button",3),d("click",function(){return a.onView()}),r(6,"View"),e(),t(7,"button",4),d("click",function(){return a.onDelete()}),r(8,"Delete"),e(),t(9,"button",5),d("click",function(){return a.onOpen()}),r(10,"Edit"),e()())},dependencies:[M,F,fe,N,xe],encapsulation:2});let n=s;return n})();function Ot(n,s){if(n&1){let l=S();t(0,"mat-list-item",16),d("click",function(){let o=f(l).$implicit,a=C();return x(a.onGroupClick(o._id))}),r(1),e()}if(n&2){let l=s.$implicit;m(),v(" ",l.name," ")}}var Qe=(()=>{let s=class s{constructor(i,o,a,c,g){this.dialog=i,this.authService=o,this.businessData=a,this.groupService=c,this.router=g,this.groups=[]}ngOnInit(){let i=sessionStorage.getItem("LEAD_ID");this.authService.authAfterReferesh(!0,i),this.app_version=sessionStorage.getItem("Version"),console.log(this.groups),this.fetchGroups()}onGroupClick(i){this.groupID=i,this.router.navigate(["dashboard/group-expense"],{queryParams:{id:i}})}fetchGroups(){this.groupService.getAllGroupsByUserId().subscribe({next:i=>{console.log("Groups retrieved successfully:",i),this.groups=i.groups,console.log(this.groups)},error:i=>{console.error("Error retrieving groups:",i)}})}refreshGroups(){this.fetchGroups()}onAdd(){this.businessData.onNavigate("home")}Profile(){this.openDialog()}openDialog(){this.dialog.open(Le,{width:"600px"})}onLogout(){this.dialog.open(z,{data:{type:"alert"}})}groupdetails(){this.dialog.open(He,{width:"500px",disableClose:!0}).componentInstance.groupCreated.subscribe(o=>{console.log("Group created",o),this.groups.push(o)})}};s.\u0275fac=function(o){return new(o||s)(p(I),p(V),p(k),p(Te),p(O))},s.\u0275cmp=E({type:s,selectors:[["app-home"]],decls:49,vars:1,consts:[["drawer",""],["hasBackdrop","True","autosize","",1,"example-container",2,"height","100vh"],["mode","over",1,"example-sidenav",2,"height","100%"],[2,"border-bottom","2px solid red","font-family","'Segoe UI', Tahoma, Geneva, Verdana, sans-serif"],[1,"side-nav-btn"],["mat-raised-button","","color","primary",3,"click"],[2,"margin-top","20px"],["mat-raised-button","","color","primary","routerLink","../suggestions"],[2,"border-bottom","2px solid red","font-family","'Segoe UI', Tahoma, Geneva, Verdana, sans-serif","margin-top","15px"],["role","list"],["role","listitem",3,"click",4,"ngFor","ngForOf"],[2,"border-bottom","1px solid black"],["mat-icon-button","","aria-label","Example icon-button with menu icon",1,"example-icon",3,"click"],[1,"example-spacer"],["mat-raised-button","","color","accent",3,"click"],[1,"mainlogin"],["role","listitem",3,"click"]],template:function(o,a){if(o&1){let c=S();t(0,"mat-drawer-container",1)(1,"mat-drawer",2,0)(3,"h2",3),r(4," Spend Wise "),e(),t(5,"div")(6,"div",4)(7,"button",5),d("click",function(){return f(c),x(a.Profile())}),t(8,"mat-icon"),r(9,"perm_identity"),e(),r(10,"Profile "),e(),t(11,"div",6)(12,"button",5),d("click",function(){return f(c),x(a.onAdd())}),t(13,"mat-icon"),r(14,"add-chart"),e(),r(15,"Add Expenses "),e()(),t(16,"div",6)(17,"button",5),d("click",function(){return f(c),x(a.onLogout())}),t(18,"mat-icon"),r(19,"logout"),e(),r(20,"Logout "),e()(),t(21,"div",6)(22,"button",7)(23,"mat-icon"),r(24,"Suggestions"),e(),r(25,"Suggestions "),e()()()(),t(26,"h2",8),r(27," Group "),e(),t(28,"div",4)(29,"button",5),d("click",function(){return f(c),x(a.groupdetails())}),t(30,"mat-icon"),r(31,"group_add"),e(),r(32,"Create group "),e(),t(33,"mat-list",9),h(34,Ot,2,1,"mat-list-item",10),e()()(),t(35,"div")(36,"mat-toolbar",11)(37,"button",12),d("click",function(){f(c);let w=re(2);return x(w.toggle())}),t(38,"mat-icon"),r(39,"list"),e()(),t(40,"span"),r(41,"Spend Wise"),e(),_(42,"span",13),t(43,"button",14),d("click",function(){return f(c),x(a.onLogout())}),t(44,"mat-icon"),r(45,"logout"),e(),r(46,"Logout "),e()()(),t(47,"div",15),_(48,"app-view-expenses"),e()()}o&2&&(m(34),u("ngForOf",a.groups))},dependencies:[P,Ve,Ae,$,M,pe,A,j,je,Be,Ue],styles:[".example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.example-sidenav-content[_ngcontent-%COMP%]{display:flex;height:100%;align-items:center;justify-content:center}.example-sidenav[_ngcontent-%COMP%]{padding-left:50px;padding-right:100px;padding-top:50px}.btns[_ngcontent-%COMP%]{position:fixed;bottom:10%;right:5%;z-index:100}.social-btns[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#fff;background-color:#fff}.side-nav-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{transform:scale(1.1);transition:.5s}"]});let n=s;return n})();var W=Ze(Ke());function kt(n,s){if(n&1){let l=S();t(0,"li")(1,"button",22),d("click",function(){f(l);let o=C();return x(o.deleteGroup())}),r(2,"Delete Group"),e()()}}function It(n,s){if(n&1&&(t(0,"li"),r(1),e()),n&2){let l=s.$implicit;m(),b(l)}}var Je=(()=>{let s=class s{constructor(i,o,a,c,g,w){this.dialog=i,this.route=o,this.router=a,this.http=c,this.dataService=g,this.authService=w,this.userID=localStorage.getItem("Id"),this.token=localStorage.getItem("LEAD_ID"),this.groupMembers=[],this.groupID="",this.showDialog=!1,this.createdbyid="",this.auid="",this.groupName="",this.totalAmount=5e3,this.amountOwed=1e3,this.amountOwedToYou=20}ngOnInit(){this.route.queryParams.subscribe(o=>{this.groupID=o.id}),this.getGroupDetails();let i=sessionStorage.getItem("LEAD_ID");this.authService.authAfterReferesh(!0,i)}sendData(){let i=this.groupID,o=this.groupMembers,a=this.groupName;this.dataService.setData(i,o,a)}openactivity(){this.router.navigate(["/activity"],{queryParams:{id:this.groupID}})}openGroupDashboard(){this.router.navigate(["group-dashboard"],{queryParams:{id:this.groupID}})}getGroupDetails(){if(this.userID!==null){let i=this.userID.split(" ");this.wordAfterSpace=i[1]}this.http.get(`http://localhost:2000/group/groupbyid?groupId=${this.groupID}`,{headers:new q({"Content-Type":"application/json",Authorization:`Bearer ${this.token}`})}).subscribe({next:i=>{console.log("ioaonafnokanoifaonfanoi"+JSON.stringify(i)),this.groupName=i.group.name,this.createdbyid=i.group.groupcreatedby;let o=0,a=0;console.log("cretd by "+this.createdbyid),this.auid=this.userID?.split(" ")[1];let c=this.auid[1];console.log("creted by id"+this.auid);for(let g of i.group.expenses)if(g.userid==this.wordAfterSpace){o+=g.amount;for(let w of g.split_members)w.member_id==this.wordAfterSpace&&(o-=w.shareamount)}else for(let w of g.split_members)w.member_id==this.wordAfterSpace&&(a+=w.shareamount);this.amountOwedToYou=o,this.amountOwed=a,this.totalAmount=o-a,this.groupMembers=i.group.members,this.sendData()},error:i=>{console.error("Error fetching group details:",i)}})}onLogout(){this.dialog.open(z,{data:{type:"alert"}})}openAddExpenseDialog(){this.dialog.open(Fe,{width:"400px"})}openActivity(){}deleteGroup(){if(!this.groupID){console.error("No group ID provided to delete.");return}this.http.delete(`http://localhost:2000/group/deletegroup?groupId=${this.groupID}`,{headers:new q({"Content-Type":"application/json",Authorization:`Bearer ${this.token}`})}).subscribe({next:i=>{console.log("Group deleted successfully:",i),W.default.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(o=>{o.isConfirmed&&W.default.fire({title:"Deleted!",text:"Your file has been deleted.",icon:"success"}),document.location.reload()})},error:i=>{console.error("Error deleting group:",i),W.default.fire({icon:"error",title:"Oops...",text:"Error deleting group",showConfirmButton:!1}),document.location.reload()}})}};s.\u0275fac=function(o){return new(o||s)(p(I),p(le),p(O),p(G),p(ke),p(V))},s.\u0275cmp=E({type:s,selectors:[["app-group-expense-screen"]],decls:46,vars:6,consts:[[1,"bg"],[2,"border-bottom","1px solid black","position","relative"],["routerLink","/dashboard"],[1,"example-spacer"],["mat-raised-button","","color","accent",3,"click"],[1,"container"],[1,"sidebar"],[1,"sidebar-header"],[2,"font-family","Helvetica","font-weight","bold"],[1,"menu-items"],["mat-raised-button","","color","primary",3,"click"],["routerLink","/activity","mat-raised-button","","color","primary",3,"click"],[4,"ngIf"],[1,"content"],[1,"title"],[1,"member-card"],[1,"member-list"],[4,"ngFor","ngForOf"],[1,"group-container"],[1,"group-details"],[2,"display","flex","flex-direction","row","justify-content","space-between"],[2,"display","flex","flex-direction","row","justify-content","flex-start"],["routerLink","/dashboard","mat-raised-button","","color","danger",2,"background-color","red","color","white",3,"click"]],template:function(o,a){o&1&&(t(0,"div",0)(1,"mat-toolbar",1)(2,"span",2),r(3,"Spend Wise 2.0 "),e(),_(4,"span",3),t(5,"button",4),d("click",function(){return a.onLogout()}),t(6,"mat-icon"),r(7,"logout"),e(),r(8,"Logout "),e()(),t(9,"div",5)(10,"div",6)(11,"div",7)(12,"h3",8),r(13,"Menu"),e(),_(14,"mat-divider"),e(),t(15,"ul",9)(16,"li")(17,"button",10),d("click",function(){return a.openGroupDashboard()}),r(18,"Dashboard"),e()(),t(19,"li")(20,"button",11),d("click",function(){return a.openactivity()}),r(21,"Activity"),e()(),h(22,kt,3,0,"li",12),e(),t(23,"div",13)(24,"h3",14),r(25,"Members"),e(),t(26,"mat-card",15)(27,"mat-card-content")(28,"ul",16),h(29,It,2,1,"li",17),e()()()()()(),t(30,"div",18)(31,"div",19)(32,"div",20)(33,"h2"),r(34),e(),t(35,"div")(36,"button",4),d("click",function(){return a.openAddExpenseDialog()}),r(37,"Add Expense"),e()()(),_(38,"mat-divider"),t(39,"div",21)(40,"p"),r(41),e(),t(42,"p"),r(43),e(),t(44,"p"),r(45),e()()()()()),o&2&&(m(22),u("ngIf",a.auid==a.createdbyid),m(7),u("ngForOf",a.groupMembers),m(5),b(a.groupName),m(7),v("Total amount: $",a.totalAmount,""),m(2),v("You owe: $",a.amountOwed,""),m(2),v("You are owed: $",a.amountOwedToYou,""))},dependencies:[P,T,$,M,A,B,R,j,Ge],styles:[".example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.example-sidenav-content[_ngcontent-%COMP%]{display:flex;height:100%;align-items:center;justify-content:center}.example-sidenav[_ngcontent-%COMP%]{padding-left:50px;padding-right:100px;padding-top:50px}.btns[_ngcontent-%COMP%]{position:fixed;bottom:10%;right:5%;z-index:100}.social-btns[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#fff;background-color:#fff}.side-nav-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{transform:scale(1.1);transition:.5s}[_nghost-%COMP%]     .p-dialog .product-image{width:150px;margin:0 auto 2rem;display:block}.container[_ngcontent-%COMP%]{display:flex}.sidebar-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0}.menu-items[_ngcontent-%COMP%]{list-style-type:none;margin-top:10px;padding:0}.menu-items[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:10px}.menu-items[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#333}.content[_ngcontent-%COMP%]{flex:1;padding:10px;flex-wrap:wrap}p[_ngcontent-%COMP%]{margin-right:15px}.content[_ngcontent-%COMP%]{font-family:Helvetica,Arial,sans-serif}.container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;max-width:100%;margin:0 auto}.sidebar[_ngcontent-%COMP%]{position:fixed;left:0;width:100%;max-width:305px;background-color:#f0f0f0;padding:20px;flex-direction:column;height:auto}.group-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-left:auto;margin-right:auto;margin-top:20px;width:100%;max-width:79%}.group-details[_ngcontent-%COMP%]{flex-grow:2;background-color:#e0e0e0;padding:20px;border-radius:5px;margin:20px}.group-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;margin-bottom:10px;margin-right:10px}.menu-items[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;margin-bottom:10px}.menu-items[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(:last-child){margin-bottom:20px}@media (max-width: 767px){.menu-items[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(:last-child){margin-bottom:10px}}@media (max-width: 767px){.group-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:5px}}@media (min-width: 768px){.sidebar[_ngcontent-%COMP%]{width:305px}.group-container[_ngcontent-%COMP%]{max-width:calc(100% - 325px);margin-left:325px}}@media (min-width: 1200px){.sidebar[_ngcontent-%COMP%]{width:305px}.group-container[_ngcontent-%COMP%]{max-width:calc(100% - 325px);margin-left:325px}}@media (max-width: 767px){.sidebar[_ngcontent-%COMP%]{position:static;width:100%}.group-container[_ngcontent-%COMP%]{order:1;margin-top:0;margin-bottom:20px;margin-left:5px}.group-details[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;width:100%;max-width:100%}.group-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:calc(50% - 5px);margin-bottom:10px;margin-left:50px}}.bg[_ngcontent-%COMP%]{background:linear-gradient(-45deg,#efefd8,#eaffbb,#ffd740,#ffd740);background-size:400% 400%;animation:_ngcontent-%COMP%_gradient 15s ease infinite;height:100vh}@keyframes _ngcontent-%COMP%_gradient{0%{background-position:0% 50%}50%{background-position:100% 50%}to{background-position:0% 50%}}"]});let n=s;return n})();var Pt=[{path:"",component:Qe,canActivate:[Q],title:"Dashboard | SpendWise"},{path:"group-expense",component:Je,canActivate:[Q]}],xi=(()=>{let s=class s{};s.\u0275fac=function(o){return new(o||s)},s.\u0275mod=ie({type:s}),s.\u0275inj=te({imports:[se,Ne,me.forChild(Pt),Re,Pe]});let n=s;return n})();export{xi as HomeModule};
